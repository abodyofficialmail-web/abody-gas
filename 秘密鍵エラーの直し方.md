# 「DECODER routines::unsupported」エラーの直し方

秘密鍵を .env.local に貼ると改行の扱いでエラーになることがあります。**JSON ファイル方式**にすると確実です。

## 手順（3分）

### 1. 鍵（JSON）をダウンロード

1. [Google Cloud Console](https://console.cloud.google.com/) を開く
2. 該当プロジェクトを選択
3. **「APIとサービス」→「認証情報」**
4. サービスアカウント一覧で、使っているアカウント（例: id-766@gym-yoyaku-486705.iam.gserviceaccount.com）をクリック
5. **「鍵」** タブ → **「鍵を追加」** → **「新しい鍵を作成」** → **「JSON」** を選んで **作成**
6. JSON ファイルがダウンロードされる（名前は長い英数字のもの）

### 2. プロジェクトに置く

1. ダウンロードした JSON ファイルを、**プロジェクトの一番上**（`abody-gas` フォルダの直下）に置く
2. ファイル名を **`service-account.json`** に変更する

### 3. .env.local を書き換える

1. `.env.local` を開く
2. 次の行を探す：
   ```env
   # GOOGLE_SERVICE_ACCOUNT_JSON_PATH=service-account.json
   ```
3. **先頭の `#` を消して**有効にする：
   ```env
   GOOGLE_SERVICE_ACCOUNT_JSON_PATH=service-account.json
   ```
4. **GOOGLE_SERVICE_ACCOUNT_EMAIL** と **GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY** の2行は、そのままでも消してもどちらでも動きます（JSON があれば JSON が優先されます）
5. 保存する

### 4. サーバーを再起動

ターミナルで一度 Ctrl+C で止めてから、もう一度：

```bash
npm run dev
```

その後、もう一度「「data」シートの1行目にヘッダーを入れる」を試してください。
