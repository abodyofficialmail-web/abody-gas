# ジム個室利用リマインドメール「時間ずれ」修正

## 1. 修正内容

- **現象**: 予約が「2/9 9:00〜9:30」なのに、メールに「04:00 - 04:30」など別の時間が表示されていた
- **原因**: Vercel サーバーが UTC。`getHours()` / `getMinutes()` をそのまま使っていたため、日本時間とずれていた
- **対応**: 日付・時刻を **日本時間（Asia/Tokyo）** でフォーマットするように変更

## 2. 修正したファイル

- `src/app/api/send-reminders/route.ts`
  - `formatDateStr()` … `Intl.DateTimeFormat` で `timeZone: 'Asia/Tokyo'` を使用
  - `formatTimeStr()` … 同様に JST で「09:00 - 09:30」形式に表示

## 3. デプロイ手順（最初から）

### 前提

- リポジトリ: `https://github.com/abodyofficialmail-web/abody-gas`
- Vercel と GitHub を連携している想定（push で自動デプロイ）

### Step 1: リモートを HTTPS にしておく

```bash
cd /Users/kazuhiko/abody-gas
git remote set-url origin https://github.com/abodyofficialmail-web/abody-gas.git
```

### Step 2: 変更をコミット

```bash
git add src/app/api/send-reminders/route.ts
git status   # 確認
git commit -m "fix: リマインドメールの時間を日本時間で表示"
```

### Step 3: GitHub に push

```bash
git push
```

- **Username を聞かれたら**: `abodyofficialmail-web`
- **Password を聞かれたら**: **Personal Access Token**（GitHub のパスワードではない）

※ push に失敗する場合（Invalid username or token）:
1. Mac の **キーチェーンアクセス** で「github.com」を検索 → 該当項目を削除
2. もう一度 `git push` → Username と Password（トークン）を入力
3. トークンは GitHub → Settings → Developer settings → Personal access tokens で作成（**repo** にチェック）

### Step 4: デプロイ確認

- push が成功すると、Vercel が自動でビルド・デプロイ
- Vercel ダッシュボードでデプロイ完了を確認
- 次回以降のリマインドメールから、正しい日本時間が表示される

## 4. 補足

- 既に送信済みのリマインドメールは変更されない
- 新しいリマインドから日本時間で表示される
